<div class="d-flex align-items-center justify-content-center min-vh-100"
    style="background: linear-gradient(to bottom right, #2563eb, #1e40af);">

    <div class="card shadow-lg p-4" style="max-width: 420px; width: 100%;">

        <h4 class="text-center mb-3">Reset Password</h4>

        <!-- ================= STEP 1 ================= -->
        @if (!tokenSent) {

        <p class="text-muted text-center small mb-3">
            Klik tombol untuk mendapatkan token reset
        </p>

        <form (ngSubmit)="requestToken()">

            <div class="mb-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" [(ngModel)]="email" name="email" required>
            </div>

            <button type="submit" class="btn btn-primary w-100" [disabled]="isLoading">

                @if (isLoading) {
                Mengirim...
                } @else {
                Request Reset
                }

            </button>

        </form>
        }

        <!-- ================= STEP 2 ================= -->
        @if (tokenSent) {

        <p class="text-muted text-center small mb-3">
            Masukkan token & password baru
        </p>

        <form (ngSubmit)="resetPassword()">

            <div class="mb-3">
                <label class="form-label">Token</label>
                <input type="text" class="form-control" [(ngModel)]="token" name="token" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Password Baru</label>
                <input type="password" class="form-control" [(ngModel)]="newPassword" name="newPassword" required>
            </div>

            <button type="submit" class="btn btn-success w-100" [disabled]="isLoading">

                @if (isLoading) {
                Memproses...
                } @else {
                Reset Password
                }

            </button>

        </form>

        <button class="btn btn-outline-secondary w-100 mt-2" (click)="resetForm()">

            Ulangi
        </button>

        }

        <!-- ================= MESSAGE ================= -->

        @if (message) {
        <div class="alert alert-success mt-3 py-2">
            {{ message }}
        </div>
        }

        @if (error) {
        <div class="alert alert-danger mt-3 py-2">
            {{ error }}
        </div>
        }

        <a routerLink="/login" class="btn btn-link w-100 mt-2 text-decoration-none">

            Kembali ke Login
        </a>

    </div>
</div>