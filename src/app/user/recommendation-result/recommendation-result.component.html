<!-- Jika belum ada hasil -->
<div *ngIf="results.length === 0" class="card shadow-sm border-0 py-5">
  <div class="card-body text-center py-5">
    <i class="bi bi-exclamation-circle text-muted" style="font-size: 4rem;"></i>
    <h3 class="fw-bold text-dark mt-4">Belum Ada Data Penilaian</h3>
    <p class="text-secondary mx-auto" style="max-width: 400px;">
      Silakan isi formulir penilaian terlebih dahulu untuk melihat rekomendasi bidang peminatan Anda.
    </p>
  </div>
</div>

<!-- Jika ada hasil -->
<div *ngIf="results.length > 0">

  <!-- Header -->
  <div class="mb-4">
    <h2 class="h3 fw-bold text-dark mb-1">Hasil Rekomendasi</h2>
    <p class="text-muted">Berdasarkan metode SAW (Simple Additive Weighting)</p>
  </div>

  <!-- ================= PODIUM ================= -->
  <div class="card shadow-lg border-0 mb-5">
    <div class="card-header bg-white text-center py-3">
      <h4 class="fw-bold mb-0">üèÜ Peringkat Terbaik</h4>
    </div>

    <div class="card-body py-5">

      <div class="row justify-content-center align-items-end text-center">

        <!-- JUARA 2 -->
        <div class="col-4" *ngIf="results.length > 1">
          <div class="mb-3">
            <i class="bi bi-award-fill text-warning fs-1"></i>
            <h6 class="fw-bold mt-2 text-warning">Bidang {{ getBidangName(results[1].bidangId) }}</h6>
            <div class="fw-bold text-warning">
              {{ results[1].skorAkhir | number:'1.4-4' }}
            </div>
          </div>

          <div class="bg-warning text-dark rounded-top-4 shadow d-flex justify-content-center align-items-center"
            [style.height.px]="120 + (results[1].skorAkhir * 100)">
            <h3 class="fw-bold">2</h3>
          </div>
        </div>

        <!-- JUARA 1 -->
        <div class="col-4" *ngIf="results.length > 0">
          <div class="mb-3">
            <i class="bi bi-trophy-fill text-success fs-1"></i>
            <h5 class="fw-bold mt-2 text-success">
              Bidang {{ getBidangName(results[0].bidangId) }}
            </h5>
            <div class="fw-bold text-success fs-4">
              {{ results[0].skorAkhir | number:'1.4-4' }}
            </div>
          </div>

          <div class="bg-success text-white rounded-top-4 shadow-lg d-flex justify-content-center align-items-center"
            [style.height.px]="160 + (results[0].skorAkhir * 120)">
            <h2 class="fw-bold">1</h2>
          </div>
        </div>

        <!-- JUARA 3 -->
        <div class="col-4" *ngIf="results.length > 2">
          <div class="mb-3">
            <i class="bi bi-award text-danger fs-1"></i>
            <h6 class="fw-bold mt-2 text-danger">Bidang {{ getBidangName(results[2].bidangId) }}</h6>
            <div class="fw-bold text-danger">
              {{ results[2].skorAkhir | number:'1.4-4' }}
            </div>
          </div>

          <div class="bg-danger text-white rounded-top-4 shadow d-flex justify-content-center align-items-center"
            [style.height.px]="100 + (results[2].skorAkhir * 80)">
            <h3 class="fw-bold">3</h3>
          </div>
        </div>

      </div>

    </div>
  </div>

  <!-- ================= REKOMENDASI TERBAIK DETAIL ================= -->
  <div class="card border-0 shadow-lg mb-5 overflow-hidden text-white"
    style="background: linear-gradient(45deg, #0d6efd, #0a58ca);">

    <div class="card-body p-4 p-md-5">

      <div class="d-flex align-items-center gap-3 mb-4">
        <i class="bi bi-stars text-warning fs-1"></i>
        <h3 class="h2 fw-bold mb-0">Detail Rekomendasi Terbaik</h3>
      </div>

      <div class="bg-white bg-opacity-10 rounded-4 p-4 border border-white border-opacity-25">

        <h4 class="display-6 fw-bold mb-3">
          Bidang {{ getBidangName(results[0].bidangId) }}
        </h4>

        <div class="row g-3">

          <div class="col-md-4">
            <div class="bg-white bg-opacity-25 px-4 py-3 rounded-3 text-center">
              <span class="small d-block opacity-75">Skor SAW</span>
              <span class="fs-3 fw-bold">
                {{ results[0].skorAkhir | number:'1.4-4' }}
              </span>
            </div>
          </div>

          <div class="col-md-8">
            <div class="row g-2">
              <div *ngFor="let norm of results[0].normalizedValues | keyvalue" class="col-6 col-md-4">
                <div class="bg-white bg-opacity-25 p-2 rounded text-center">
                  <div class="small opacity-75">{{ norm.key }}</div>
                  <div class="fw-bold">
                    {{ norm.value | number:'1.3-3' }}
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>
    </div>
  </div>

  <!-- ================= PERINGKAT SEMUA BIDANG ================= -->
  <div class="card border-0 shadow-lg mb-5">

    <div class="card-header bg-white py-3">
      <h4 class="fw-bold mb-0">üìä Peringkat Semua Bidang</h4>
    </div>

    <div class="card-body p-4">

      <div *ngFor="let item of results; let i = index" class="mb-4">

        <!-- Header Bidang -->
        <div class="d-flex justify-content-between align-items-center mb-2">

          <div class="d-flex align-items-center gap-2">

            <!-- Icon Ranking -->
            <i class="bi" [ngClass]="{
              'bi-trophy-fill text-success': i === 0,
              'bi-award-fill text-warning': i === 1,
              'bi-award text-danger': i === 2,
              'bi-bar-chart text-secondary': i > 2
            }" style="font-size: 1.5rem;">
            </i>

            <div>
              <h6 class="fw-bold mb-0">
                {{ getBidangName(item.bidangId) }}
              </h6>
              <small class="text-muted">
                Peringkat {{ i + 1 }}
              </small>
            </div>

          </div>

          <!-- Skor -->
          <div class="text-end">
            <small class="text-muted">Skor SAW</small>
            <div class="fw-bold text-primary">
              {{ item.skorAkhir | number:'1.4-4' }}
            </div>
          </div>

        </div>

        <!-- Progress Bar -->
        <div class="progress mb-3" style="height: 10px;">

          <div class="progress-bar" role="progressbar" [style.width.%]="item.skorAkhir * 100" [ngClass]="{
            'bg-success': i === 0,
            'bg-warning': i === 1,
            'bg-danger': i === 2,
            'bg-secondary': i > 2
          }">
          </div>

        </div>

        <!-- Nilai Kriteria -->
        <div class="row g-2">

          <div *ngFor="let norm of item.normalizedValues | keyvalue" class="col-6 col-md-2">

            <div class="bg-light p-2 rounded text-center small">

              <div class="text-muted">
                {{ norm.key }}
              </div>

              <div class="fw-bold">
                {{ norm.value | number:'1.3-3' }}
              </div>

            </div>

          </div>

        </div>

        <hr *ngIf="i < results.length - 1">

      </div>

    </div>

  </div>

</div>