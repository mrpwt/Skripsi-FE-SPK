<div class="card shadow-sm mx-auto border-0" style="max-width: 800px;">
    <div *ngIf="isLoading" class="card-body p-5 text-center">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-3 text-muted">Menyiapkan soal ujian...</p>
    </div>

    <div class="card-body p-4" *ngIf="!isLoading && questions.length > 0">
        <div class="d-flex justify-content-between mb-2 small fw-bold">
            <span class="text-secondary">Pertanyaan {{ currentQuestionIndex + 1 }} dari {{ questions.length }}</span>
            <span class="text-primary">{{ progress }}%</span>
        </div>
        <div class="progress mb-4" style="height: 6px;">
            <div class="progress-bar progress-bar-striped progress-bar-animated" [style.width.%]="progress"></div>
        </div>

        <div class="mb-4">
            <span class="badge bg-primary-subtle text-primary mb-2 px-3 py-2 rounded-pill">
                {{ getBidangName(currentQuestion.bidangId) }}
            </span>
            <h4 class="card-title fw-bold text-dark leading-base">{{ currentQuestion.pertanyaan }}</h4>
        </div>

        <div class="d-grid gap-3">
            <button (click)="selectedAnswer = 'A'" class="btn text-start p-3 border-2 shadow-sm transition-all"
                [class.btn-outline-primary]="selectedAnswer === 'A'" [class.bg-white]="selectedAnswer !== 'A'">
                <span class="fw-bold me-2">A.</span> {{ currentQuestion.opsi.A }}
            </button>

            <button (click)="selectedAnswer = 'B'" class="btn text-start p-3 border-2 shadow-sm transition-all"
                [class.btn-outline-primary]="selectedAnswer === 'B'" [class.bg-white]="selectedAnswer !== 'B'">
                <span class="fw-bold me-2">B.</span> {{ currentQuestion.opsi.B }}
            </button>

            <button (click)="selectedAnswer = 'C'" class="btn text-start p-3 border-2 shadow-sm transition-all"
                [class.btn-outline-primary]="selectedAnswer === 'C'" [class.bg-white]="selectedAnswer !== 'C'">
                <span class="fw-bold me-2">C.</span> {{ currentQuestion.opsi.C }}
            </button>

            <button (click)="selectedAnswer = 'D'" class="btn text-start p-3 border-2 shadow-sm transition-all"
                [class.btn-outline-primary]="selectedAnswer === 'D'" [class.bg-white]="selectedAnswer !== 'D'">
                <span class="fw-bold me-2">D.</span> {{ currentQuestion.opsi.D }}
            </button>
        </div>

        <div class="mt-5 d-flex justify-content-between align-items-center">
            <div>
                <p class="text-muted small mb-0 fst-italic">
                    *Pilih salah satu jawaban yang menurut Anda paling tepat.
                </p>
                <p class="text-muted small mb-0 fst-italic">
                    *Wajib mengisi semua soal agar bisa melanjutkan ke tahap selanjutnya.
                </p>
            </div>
            <button class="btn btn-primary px-5 py-2 fw-bold shadow" [disabled]="!selectedAnswer"
                (click)="handleNext()">
                {{ currentQuestionIndex < questions.length - 1 ? 'Selanjutnya' : 'Selesai & Lihat Hasil' }} </button>
        </div>
    </div>

    <div class="card-body p-5 text-center" *ngIf="!isLoading && questions.length === 0">
        <h5 class="text-muted">Tidak ada soal tersedia untuk saat ini.</h5>
    </div>
</div>